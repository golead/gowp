const paramsToObject=e=>{const t={};for(var[n,o]of e)t[n]=o;return t},closeBoxGowp=()=>{let e=document.getElementById("box-gowp");e.style.display="none"},handleSendGowp=async()=>{document.getElementById("text-not-loading-wp").style.display="none",document.getElementById("text-loading-wp").style.display="block";let e=document.getElementById("gowpchat");var t=e.getAttribute("src");let n=new URL(t);var o=paramsToObject(n.searchParams.entries()),t={from:"gowhatsapp",cd_user:o.cd_user,ref_channel:o.ref_channel,nome:document.getElementById("name-input-gowp").value,email:document.getElementById("email-input-gowp").value,telefone:document.getElementById("phone-input-gowp").value,observacao:"Mensagem envia no WhatsApp"};try{await fetch("http://localhost:3001/prod/send-lead-whatsapp",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json());let e=document.getElementById("text-error-wp");e.style.display="none",document.getElementById("text-not-loading-wp").style.display="block",document.getElementById("text-loading-wp").style.display="none",window.location.href=`https://api.whatsapp.com/send?phone=${o.cd_wp}&text=Olá, vamos conversar?`}catch(e){console.log(e),document.getElementById("text-not-loading-wp").style.display="block",document.getElementById("text-loading-wp").style.display="none",document.getElementById("text-error-wp").style.display="block"}},loadButton=()=>{let e=document.createElement("div");e.setAttribute("id","golead-wpp");let t=document.createElement("button"),n=document.createElement("div");t.setAttribute("id","btn-gowpp"),t.innerHTML=`<div>
        <div class="btn-float-wpp">
            <img src="https://www.golead.com.br/images/canais/logo-whats-btn.png" />
        </div>
    </div>`,n.innerHTML=`
    <div class="box-whatsapp" style="display: none" id="box-gowp">
        <div class="box-header">
            <h5>Olá! Antes de continuarmos a conversa no WhatsApp, deixa eu te conhecer melhor!</h5>
            <button class="btn-close p-0 text-light" onClick="closeBoxGowp();"></button>
        </div>
        <div class="box-body">
            <form>
                <input type="text" class="input-custom" placeholder="Nome" id="name-input-gowp" required />
                <input type="email" class="input-custom" placeholder="E-mail" id="email-input-gowp" required />
                <input type="text" class="input-custom" placeholder="Telefone" id="phone-input-gowp" required />
                <button type="button" class="btn-send-wpp" onclick="handleSendGowp();">
                    <span id="text-not-loading-wp">Vamos lá!</span>
                    <span id="text-loading-wp" style="display: none">Carregando...</span>
                </button>
                <span class="text-error" id="text-error-wp" style="display: none">Ocorreu um problema inesperado! Tente mais tarde.</span>
            </form>
        </div>
    </div>
    `,t.addEventListener("click",function(){let e=document.getElementById("box-gowp");e.style.display="block"}),e.appendChild(t),e.appendChild(n),document.body.appendChild(e)};window.onload=loadButton;